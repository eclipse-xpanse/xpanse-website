"use strict";(self.webpackChunkxpanse_website=self.webpackChunkxpanse_website||[]).push([[2395],{3013:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"production","title":"Running in Production","description":"To run xpanse in production, we must ensure that all necessary","source":"@site/docs/production.mdx","sourceDirName":".","slug":"/production","permalink":"/xpanse/docs/production","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8},"sidebar":"tutorialSidebar","previous":{"title":"Policies","permalink":"/xpanse/docs/policies"},"next":{"title":"Request Audit","permalink":"/xpanse/docs/request-audit"}}');var i=r(4848),t=r(8453),a=r(7346);const o={sidebar_position:8},d="Running in Production",l={},c=[{value:"Run using jar",id:"run-using-jar",level:2},{value:"Run using Docker image",id:"run-using-docker-image",level:2},{value:"Running API behind a proxy",id:"running-api-behind-a-proxy",level:4}];function u(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h4:"h4",header:"header",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"running-in-production",children:"Running in Production"})}),"\n",(0,i.jsxs)(n.p,{children:["To run xpanse in production, we must ensure that all necessary ",(0,i.jsx)(a.A,{name:"dependent systems in the stack",url:"architecture#xpanse-stack",isOpenInNewTab:!1}),"\nare also deployed together as a stack."]}),"\n",(0,i.jsxs)(n.p,{children:["All required ",(0,i.jsx)(a.A,{name:"profiles and configurations",url:"./spring-profiles",isOpenInNewTab:!1})," must be known beforehand."]}),"\n",(0,i.jsx)(n.h2,{id:"run-using-jar",children:"Run using jar"}),"\n",(0,i.jsxs)(n.p,{children:["Download the released runtime jar from GitHub releases. You can get the latest from ",(0,i.jsx)(a.A,{name:"here",url:"https://github.com/eclipse-xpanse/xpanse/releases/latest"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"After downloading, we can start the jar file using the Java command."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"java -jar xpanse-runtime-*.jar\n"})}),"\n",(0,i.jsx)(n.h2,{id:"run-using-docker-image",children:"Run using Docker image"}),"\n",(0,i.jsx)(n.p,{children:"You can start the runtime using our released docker image, and this is the preferred way. This image\ncontains all necessary tools preinstalled. Below is an example of running a single instance of xpanse."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:'$ docker pull ghcr.io/eclipse-xpanse/xpanse:${release-version}\n$ docker run -d -p 8080:8080 --name xpanse -e "SPRING_PROFILES_ACTIVE=oauth,zitadel,mysql" ghcr.io/eclipse-xpanse/xpanse:${release-version}\n$ docker logs xpanse\n'})}),"\n",(0,i.jsx)(n.admonition,{title:"Avoid properties in command line",type:"danger",children:(0,i.jsxs)(n.p,{children:["It's safe to provide all properties as environment variables rather than passing them directly in the command line.\nIn case of this, the same property name must be set in UPPERCASE for all four variables.\nFor running, using docker image, we can use the ",(0,i.jsx)(n.code,{children:" --env-file"})," option of the ",(0,i.jsx)(n.code,{children:"docker run"})," command to store all sensitive data.\nAgain, here the property names must be in UPPERCASE."]})}),"\n",(0,i.jsx)(n.h4,{id:"running-api-behind-a-proxy",children:"Running API behind a proxy"}),"\n",(0,i.jsxs)(n.p,{children:["For running the runtime application behind a proxy, we must ensure that the proxy forwards the\ncorrect ",(0,i.jsx)(n.code,{children:"X-Forwarded-*"}),"headers to the API.\nThis is necessary since the API has some features where the\nlinks to HTML pages are returned and this link will have the correct protocol and host only when\nthese headers are set."]}),"\n",(0,i.jsx)(n.p,{children:"In the case of NGINX, the configuration will look like this"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-nginx",metastring:"configuration",children:"proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\nproxy_set_header X-Forwarded-Proto https;\nproxy_set_header Host $host;\n"})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},7346:(e,n,r)=>{r.d(n,{A:()=>i});r(6540);var s=r(4848);function i(e){let{name:n,url:r,isOpenInNewTab:i=!0}=e;return(0,s.jsx)("a",{href:r,className:"link-text",target:i?"_blank":"_self",children:n})}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var s=r(6540);const i={},t=s.createContext(i);function a(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);