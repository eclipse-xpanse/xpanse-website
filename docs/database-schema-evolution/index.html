<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-database-schema-evolution" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Database Schema Evolution | xpanse</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://eclipse.dev/xpanse/docs/database-schema-evolution"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Database Schema Evolution | xpanse"><meta data-rh="true" name="description" content="xpanse uses  framework to manage the database schema evolution of xpanse."><meta data-rh="true" property="og:description" content="xpanse uses  framework to manage the database schema evolution of xpanse."><link data-rh="true" rel="icon" href="/xpanse/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://eclipse.dev/xpanse/docs/database-schema-evolution"><link data-rh="true" rel="alternate" href="https://eclipse.dev/xpanse/docs/database-schema-evolution" hreflang="en"><link data-rh="true" rel="alternate" href="https://eclipse.dev/xpanse/docs/database-schema-evolution" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/xpanse/blog/rss.xml" title="xpanse RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/xpanse/blog/atom.xml" title="xpanse Atom Feed"><link rel="stylesheet" href="/xpanse/assets/css/styles.2c4257e4.css">
<script src="/xpanse/assets/js/runtime~main.1fc7697f.js" defer="defer"></script>
<script src="/xpanse/assets/js/main.d2cc8f41.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><link rel="preload" as="image" href="/xpanse/img/logo-header.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="content_knG7 announcementBarContent_xLdY">üóìÔ∏è Our open office hour sessions happens 2nd Wednesday of every month. <a target="_blank" rel="noopener noreferrer" href="https://calendar.google.com/calendar/event?action=TEMPLATE&tmeid=NGM3cG43cnAxMWoxdmNzNGgwb2twMTE0dTRfMjAyNTAzMTJUMDkwMDAwWiA1NzcyZTg5MTNlNGI0YTllNTIzMWRmMDQ5ZDY1MzViNzY0MTEyNGE3ODY4N2VkODY3NGM2YjI5MzYwNTAzNGUyQGc&tmsrc=5772e8913e4b4a9e5231df049d6535b7641124a78687ed8674c6b293605034e2%40group.calendar.google.com&scp=ALL">Join us</a> to learn about our roadmap and how to contribute ü§ù.</div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/xpanse/"><div class="navbar__logo"><img src="/xpanse/img/logo-header.png" alt="xpanse" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/xpanse/img/logo-header.png" alt="xpanse" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/xpanse/docs/introduction">Documentation</a><a href="https://app.swaggerhub.com/apis/eclipse-xpanse-bot/XpanseRuntimeApi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://www.youtube.com/playlist?list=PLy7t4z5SYNaTpG7zDP4u4icR356zNUJUC" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-youtube-link"></a><a class="navbar__item navbar__link header-calender-link" href="/xpanse/docs/Contribute/calendar"></a><a href="https://github.com/eclipse-xpanse" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><a href="https://matrix.to/#/#eclipse-xpanse:matrix.eclipse.org" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-matrix-link"></a><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/agent">Agent</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/api">API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/authentication-authorization">Authentication and Authorization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/configuration-language">Configuration Language</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/cloud-provider-credentials">Cloud Provider Credentials</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/caching">Caching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/xpanse/docs/database-schema-evolution">Database Schema Evolution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/database">Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/developer-setup">Developer Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/modes">Modes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/network-proxy">Network Proxy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/observability">Observability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/package-structure">Package Structure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/plugins">Plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/policies">Policies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/production">Running in Production</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/request-audit">Request Audit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/senstive-data">Sensitive Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/service-changes">Service Changes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/service-configuration">Service Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/service-deployment">Service Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/service-hosting">Service Hosting Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/service-portability">Service Portability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/service-template-reviews">Service Template Reviews</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/spring-profiles">Spring Profiles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/supported-clouds">Supported Clouds</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/ui">UI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/webhooks">Webhooks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xpanse/docs/workflows">Workflows</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/xpanse/docs/Contribute/new-developers">Contribute</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/xpanse/docs/FurtherReading/resources">FurtherReading</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/xpanse/docs/Roles/isv">Roles</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/xpanse/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Database Schema Evolution</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Database Schema Evolution</h1></header>
<!-- -->
<p>xpanse uses <a href="https://www.liquibase.com/" class="link-text" target="_blank">Liquibase</a> framework to manage the database schema evolution of xpanse.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="use-of-hdm2ddl-library">Use of hdm2ddl library<a href="#use-of-hdm2ddl-library" class="hash-link" aria-label="Direct link to Use of hdm2ddl library" title="Direct link to Use of hdm2ddl library">‚Äã</a></h2>
<p>Spring Boot uses Hibernate framework&#x27;s <strong>hdm2ddl</strong> which does the following</p>
<ol>
<li>Automatically generate DDL statements based on Entity classes available in the classpath.</li>
<li>Execute DDL statements automatically at the server start.</li>
</ol>
<p>This feature is used in xpanse by default for development purposes and
also additionally to prepare a database with all necessary database objects automatically and
then use it for generating Liquibase SQL change scripts for the respective release.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>hdm2ddl for schema evolution process</div><div class="admonitionContent_BuS1"><p>We use hdm2ddl for schema evolution in order to simplify the process of generating SQL scripts.
The developer need not write SQL scripts. Instead, we let hdm2ddl to generate the scripts and prepare the release preparation database and
then use Liquibase&#x27;s feature to auto generate DDL SQL statements based on the database structure.</p></div></div>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Manual Process</div><div class="admonitionContent_BuS1"><p>The schema generation process isn&#x27;t fully automated to ensure the changes are verified by the developer before the release is done.</p><p>Even though we use Hibernate and Liquibase to generate changes, the developer must still validate the changes generated.
This is also the recommended best practice from Liquibase.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="release-preparation">Release preparation<a href="#release-preparation" class="hash-link" aria-label="Direct link to Release preparation" title="Direct link to Release preparation">‚Äã</a></h2>
<p>When a xpanse release is planned, the developer must prepare the repository with the necessary change scripts using the steps below.
The scripts must be pushed and merged to the <strong>main</strong> branch and only then the release job must be executed. s</p>
<p>There are always two sets of changes to be prepared for each release of xpanse.</p>
<ol>
<li><strong>Full Release Change Log</strong> - This is used when the xpanse release will be installed on a fresh and empty database.</li>
<li><strong>Update change log</strong> - This contains only the difference between the new release and the previous releases.</li>
</ol>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>H2 database scripts included</div><div class="admonitionContent_BuS1"><p>Even though, H2 database is used for development purposes, we also deliver SQL scripts for it just for completeness.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prepare-full-release-snapshot">Prepare Full Release Snapshot<a href="#prepare-full-release-snapshot" class="hash-link" aria-label="Direct link to Prepare Full Release Snapshot" title="Direct link to Prepare Full Release Snapshot">‚Äã</a></h3>
<p><img decoding="async" loading="lazy" alt="full-release-snapshot-prepare" src="/xpanse/assets/images/liquibase-generate-full-release.excalidraw-45dc70cf2c7bb8f7e53125b5880ebd6b.png" width="1081" height="502" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mysql">MySql<a href="#mysql" class="hash-link" aria-label="Direct link to MySql" title="Direct link to MySql">‚Äã</a></h3>
<ol>
<li>Clone the forked xpanse repository. Ensure the fork is fully in sync with the upstream.</li>
<li>Checkout a feature branch from <code>main</code> branch.</li>
<li>Start a new MySql database container.</li>
<li>Start xpanse with <code>mysql</code> profile. Let hbm2ddl create all necessary database objects.</li>
<li>Run Liquibase&#x27;s maven plugin to generate the full release snapshot of the database schema.</li>
<li>Rename the generated file name.</li>
</ol>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Start MySql Container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker run --name mysql-db -p 3306:3306 -e MYSQL_PASSWORD=Xpanse@2023 -e MYSQL_ROOT_PASSWORD=Xpanse@2023 -e MYSQL_DATABASE=xpanse -e MYSQL_USER=xpanse -d mysql:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Start Application with mysql spring profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Run Liquibase maven plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd modules/database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mvn liquibase:generateChangeLog -Dliquibase.properties.file=src/main/resources/liquibase/liquibase.mysql.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Rename the generated src/main/resources/liquibase/full/mysql/xpanse-REPLACE_NEW_RELEASE-full.mysql.sql file name.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Replace REPLACE_NEW_RELEASE value in the file name with the next planned release value.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="h2">H2<a href="#h2" class="hash-link" aria-label="Direct link to H2" title="Direct link to H2">‚Äã</a></h3>
<ol>
<li>Clone the forked xpanse repository. Ensure the fork is fully in sync with the upstream.</li>
<li>Checkout a feature branch from <code>main</code> branch.</li>
<li>Delete existing H2 DB files from you local file system.</li>
<li>Start xpanse with default profiles which enables H2 database. Let hbm2ddl create all necessary database objects.</li>
<li>Stop the application. Otherwise, Liquibase can&#x27;t connect concurrently to the H2 database files while the application is also running.</li>
<li>Run Liquibase&#x27;s maven plugin to generate the full release snapshot of the database schema.</li>
<li>Rename the generated file name.</li>
</ol>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Start Application with default profiles.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Run Liquibase maven plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd modules/database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mvn liquibase:generateChangeLog -Dliquibase.properties.file=src/main/resources/liquibase/liquibase.h2.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Rename the generated src/main/resources/liquibase/full/h2/xpanse-REPLACE_NEW_RELEASE-full.h2.sql file name.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Replace REPLACE_NEW_RELEASE value in the file name with the next planned release value.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prepare-upgrade-to-a-release">Prepare upgrade to a release<a href="#prepare-upgrade-to-a-release" class="hash-link" aria-label="Direct link to Prepare upgrade to a release" title="Direct link to Prepare upgrade to a release">‚Äã</a></h3>
<p>This step is necessary to generate the changes necessary to upgrade a database running on a previous version of the schema
to the new version of the schema.</p>
<p><img decoding="async" loading="lazy" alt="upgrade-between-release-prepare" src="/xpanse/assets/images/liquibase-generate-diff-between-releases.excalidraw-dbe725f0731fa5d342a597c909c0a954.png" width="2110" height="825" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mysql-1">MySql<a href="#mysql-1" class="hash-link" aria-label="Direct link to MySql" title="Direct link to MySql">‚Äã</a></h4>
<p><strong>Step 1</strong> - Prepare the last released DB Schema. This represents the &#x27;is&#x27; state to the schema.</p>
<ol>
<li>Clone the xpanse upstream repository and checkout GIT <code>tag</code> of the previous released version.</li>
<li>Start a new MySql database container with port</li>
<li>Start xpanse with <code>mysql</code> profile. Let Hibernate create all necessary database objects.</li>
<li>Stop the application.</li>
</ol>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Clone the upstream repository and checkout the tag.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Forked repositories will not work.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/eclipse-xpanse/xpanse.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git checkout $vX.X.X</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Start MySql Container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker run --name mysql-db-current -p 3306:3306 -e MYSQL_PASSWORD=Xpanse@2023 -e MYSQL_ROOT_PASSWORD=Xpanse@2023 -e MYSQL_DATABASE=xpanse -e MYSQL_USER=xpanse -d mysql:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Start Application with mysql spring profile</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Step 2</strong> - Prepare the Reference DB Schema. This represents the &#x27;to-be&#x27; state of the schema.</p>
<ol>
<li>Clone the forked xpanse repository. Ensure the fork is fully in sync with the upstream.</li>
<li>Checkout a feature branch from the <code>main</code> branch.</li>
<li>Start a new MySql database container with another name and port.</li>
<li>Start xpanse with <code>mysql</code> profile and use the new database. Let Hibernate create all necessary database objects.</li>
<li>Stop the application.</li>
</ol>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Start MySql Container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker run --name mysql-db-latest -p 3307:3306 -e MYSQL_PASSWORD=Xpanse@2023 -e MYSQL_ROOT_PASSWORD=Xpanse@2023 -e MYSQL_DATABASE=xpanse -e MYSQL_USER=xpanse -d mysql:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># update the application.mysql.properties file -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.url=jdbc:mysql://localhost:3307/xpanse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Start Application with mysql spring profile</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Step 3</strong> - Use Liquibase to compare and these two databases and generate the difference change log.</p>
<ol>
<li>Run the maven plugin command with the goal specified below.</li>
<li>Verify the changes generated by Liquibase.</li>
<li>Rename the file with correct release numbers.</li>
</ol>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Run Liquibase maven plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd modules/database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mvn liquibase:diff -Dliquibase.properties.file=src/main/resources/liquibase/liquibase.mysql.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Rename the generated xpanse-upgrade-REPLACE_OLD_RELEASE-to-REPLACE_NEW_RELEASE.mysql.sql file name.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Replace REPLACE_NEW_RELEASE value in the file name with the next planned release value.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Replace REPLACE_OLD_RELEASE value in the file name with the previous released version.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="h2-1">H2<a href="#h2-1" class="hash-link" aria-label="Direct link to H2" title="Direct link to H2">‚Äã</a></h4>
<p><strong>Step 1</strong> - Prepare the last released DB Schema. This represents the &#x27;is&#x27; state to the schema.</p>
<ol>
<li>Clone the xpanse upstream repository and checkout GIT <code>tag</code> of the previous released version.</li>
<li>Delete all existing H2 database files.</li>
<li>Start xpanse with default profiles. Let Hibernate create all necessary database objects.</li>
<li>Stop the application.</li>
</ol>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># checkout git tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.url=jdbc:h2:file:./xpanse-new;DB_CLOSE_ON_EXIT=FALSE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Step 2</strong> - Prepare the Reference DB Schema. This represents the &#x27;to-be&#x27; state of the schema.</p>
<ol>
<li>Clone the forked xpanse repository. Ensure the fork is fully in sync with the upstream.</li>
<li>Checkout a feature branch from <code>main</code> branch.</li>
<li>Update spring.datasource.url to use another unique database file.</li>
<li>Start xpanse with default profiles. Let Hibernate create all necessary database objects.</li>
<li>Stop the application.</li>
</ol>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># update the application.properties file -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.url=jdbc:h2:file:./xpanse-new;DB_CLOSE_ON_EXIT=FALSE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Step 3</strong> - Use Liquibase to compare and these two databases and generate the difference change log.</p>
<ol>
<li>Run the maven plugin.</li>
<li>Verify the changes generated by Liquibase.</li>
<li>Rename the file with correct release numbers.</li>
</ol>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Run Liquibase maven plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd modules/database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mvn liquibase:diff -Dliquibase.properties.file=src/main/resources/liquibase/liquibase.h2.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Rename the generated xpanse-upgrade-REPLACE_OLD_RELEASE-to-REPLACE_NEW_RELEASE.h2.sql file name.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Replace REPLACE_NEW_RELEASE value in the file name with the next planned release value.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Replace REPLACE_OLD_RELEASE value in the file name with the previous released version.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-important admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>same process for generating upgrade from any release to new release</div><div class="admonitionContent_BuS1"><p>The steps mentioned above isn&#x27;t only valid for upgrading just previous release to new release.
Same steps can be used to upgrade from any of the previous releases to new release.</p><p>Just the tag to be checked out must be changed based on the requirement.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="merging-change-log-files">Merging Change Log Files<a href="#merging-change-log-files" class="hash-link" aria-label="Direct link to Merging Change Log Files" title="Direct link to Merging Change Log Files">‚Äã</a></h2>
<p>Once the change log is generated and verified, a PR must be opened to merge these files into the main branch.
Only after this merge is completed, the new release can be done.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installing-or-upgrading-database">Installing or Upgrading Database<a href="#installing-or-upgrading-database" class="hash-link" aria-label="Direct link to Installing or Upgrading Database" title="Direct link to Installing or Upgrading Database">‚Äã</a></h2>
<p>The below maven command must be updated with the correct change log file and
then can be used to execute the upgrade scripts on the target database.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mvn liquibase:update \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Dliquibase.properties.file=src/main/resources/liquibase/liquibase.mysql.properties \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Dliquibase.changeLogFile=src/main/resources/liquibase/full/mysql/xpanse-upgrade-v1.0.0-to-v1.0.1.mysql.xml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>double check file names</div><div class="admonitionContent_BuS1"><p>Most important parameter is the <strong>changeLogFile</strong>. This must be doubled checked before executing the command.
If we plan to execute multiple change log files, then the current sequence of change log files matter.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="design-decisions">Design Decisions<a href="#design-decisions" class="hash-link" aria-label="Direct link to Design Decisions" title="Direct link to Design Decisions">‚Äã</a></h2>
<ol>
<li>Liquibase is available since many years and has better community support.</li>
<li>XML change log used - This is the oldest format in Liquibase and also most stable one.
Found some issues with SQL formatted change logs.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="known-issues">Known Issues<a href="#known-issues" class="hash-link" aria-label="Direct link to Known Issues" title="Direct link to Known Issues">‚Äã</a></h2>
<ol>
<li>If the <strong>diff</strong> generates a change in data type with the <strong>modifyDataType</strong> tag,
then all constraints on such column is lost. We must add the constraints back to the change log script.
This is a MySQL only limitation.</li>
</ol></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/xpanse/docs/caching"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Caching</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/xpanse/docs/database"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Database</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#use-of-hdm2ddl-library" class="table-of-contents__link toc-highlight">Use of hdm2ddl library</a></li><li><a href="#release-preparation" class="table-of-contents__link toc-highlight">Release preparation</a><ul><li><a href="#prepare-full-release-snapshot" class="table-of-contents__link toc-highlight">Prepare Full Release Snapshot</a></li><li><a href="#mysql" class="table-of-contents__link toc-highlight">MySql</a></li><li><a href="#h2" class="table-of-contents__link toc-highlight">H2</a></li><li><a href="#prepare-upgrade-to-a-release" class="table-of-contents__link toc-highlight">Prepare upgrade to a release</a></li></ul></li><li><a href="#merging-change-log-files" class="table-of-contents__link toc-highlight">Merging Change Log Files</a></li><li><a href="#installing-or-upgrading-database" class="table-of-contents__link toc-highlight">Installing or Upgrading Database</a></li><li><a href="#design-decisions" class="table-of-contents__link toc-highlight">Design Decisions</a></li><li><a href="#known-issues" class="table-of-contents__link toc-highlight">Known Issues</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/xpanse/docs/introduction">Getting Started</a></li><li class="footer__item"><a href="https://app.swaggerhub.com/apis/eclipse-xpanse-bot/XpanseRuntimeApi" target="_blank" rel="noopener noreferrer" class="footer__link-item">API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/eclipse-xpanse/xpanse-website" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docs Repo<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/eclipse-xpanse/xpanse/releases" target="_blank" rel="noopener noreferrer" class="footer__link-item">Changelog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/xpanse/docs/Contribute/new-developers">New Developers</a></li><li class="footer__item"><a class="footer__link-item" href="/xpanse/docs/Contribute/code-of-conduct">Code of Conduct</a></li><li class="footer__item"><a class="footer__link-item" href="/xpanse/docs/Contribute/planning">Planning</a></li><li class="footer__item"><a class="footer__link-item" href="/xpanse/docs/Contribute/continuous-integration">Continuous Integration</a></li><li class="footer__item"><a class="footer__link-item" href="/xpanse/docs/Contribute/releases">Releases</a></li><li class="footer__item"><a class="footer__link-item" href="/xpanse/docs/Contribute/bug-handling-process">Bug Handling Process</a></li><li class="footer__item"><a class="footer__link-item" href="/xpanse/docs/Contribute/pull-requests">Pull Requests</a></li><li class="footer__item"><a class="footer__link-item" href="/xpanse/docs/Contribute/security">Security</a></li></ul></div><div class="col footer__col"><div class="footer__title">Project</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://projects.eclipse.org/projects/technology.xpanse" target="_blank" rel="noopener noreferrer" class="footer__link-item">Eclipse Foundation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/eclipse-xpanse/xpanse" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://accounts.eclipse.org/mailing-list/xpanse-dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mailing Lists<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://matrix.to/#/#eclipse-xpanse:matrix.eclipse.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Matrix<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Further Reading</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/xpanse/blog">Blogs</a></li><li class="footer__item"><a class="footer__link-item" href="/xpanse/docs/FurtherReading/demos">Demos</a></li><li class="footer__item"><a class="footer__link-item" href="/xpanse/docs/FurtherReading/resources">Resources</a></li><li class="footer__item"><a href="https://events.eclipse.org/2023/unlockthecloud/documents/unlock-the-cloud-interoperability-to-foster-the-eu-digital-market-report.pdf" target="_blank" rel="noopener noreferrer" class="footer__link-item">Impact of Open Services Cloud<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2025 Eclipse Foundation.</div></div></div></footer></div>
</body>
</html>